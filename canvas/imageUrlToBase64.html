<!DOCTYPE html>
<html>
  <head>
    <!-- prettier-ignore -->
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=0" />
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        border-radius: 9px;
        overflow: hidden;
      }
    </style>
  </head>
  <body>
    <img id="base64" src=""/>
    <img src="https://pic1.zhimg.com/v2-abed1a8c04700ba7d72b45195223e0ff_xll.jpg"/>
  </body>
  <script type="text/javascript">

  imageUrlToBase64('https://mpool.unionpay.com/file/00015800/20210705/bbfe2d8c-13c2-42bc-8a59-f1b16e9be998.jpg');
  imageUrlToBase64('https://pic1.zhimg.com/v2-abed1a8c04700ba7d72b45195223e0ff_xll.jpg')

  
  function imageUrlToBase64(iamgeUrl=""){
    const image = new Image();  
    image.crossOrigin='Anonymous';
    image.src = iamgeUrl; 
    
    image.onload = function(){  
      let base64 = getBase64Image(image);  
      console.log(iamgeUrl,base64);  
    } 

    function getBase64Image(img) {
        let canvas = document.createElement("canvas");  
        canvas.width = img.width;  
        canvas.height = img.height;  
        let ctx = canvas.getContext("2d");  
        ctx.drawImage(img, 0, 0, img.width, img.height);  
        let ext = img.src.substring(img.src.lastIndexOf(".")+1).toLowerCase();  
        let dataURL = canvas.toDataURL("image/"+ext);  
        return dataURL;  
    }
    
  }



 </script>
</html>
